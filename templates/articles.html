{% extends "base.html" %}

{% block content %}
<h1>
	<a href="/rate/{{yes_year}}/{{yes_month}}/{{yes_day}}">yesterday</a>
	Articles of {{year}}-{{month}}-{{day}}
	<a href="/rate/{{tom_year}}/{{tom_month}}/{{tom_day}}">tomorrow</a></h1>

<script>
function vote(kind) {
  $.getJSON("/rate/vote/", { identifier: '1234.1234', vote: kind }, function(json){
    alert("Was successful?: " + json['success']);
  });
}
function addClickHandlers() {
  $('.vote-up-off').click( function( event ) { 
  	var $target = $(event.target);
  	alert( $target.closest('td').attr('id') ) 
  	});
  $('.vote-down-off').click( function() { alert('dislike') });
}
$(document).ready( addClickHandlers )
</script>

{% if article_list %}
    <table>
    {% for article in article_list %}  
	    <tr>
	    <td class="votecell" id="vote-{{ article.identifier }}">
		    <a class="vote-up-off" title="like (click again to undo)">up vote</a>
	    	<span class="vote-count-post">0</span>
	    	<a class="vote-down-off" title="dislike (click again to undo)">down vote</a>
		</td>
		
		<td class="articlecell">
			<dl>
	        <dt><a href="/rate/detail/{{ article.identifier }}/">{{ article.identifier }}</a> 
	        	<a href="http://arxiv.org/abs/{{ article.identifier }}">abs</a>    	
	        	<a href="http://arxiv.org/pdf/{{ article.identifier }}">PDF</a></dt>
	        <dd>
		       	<div class="score">Score: {{ article.likes.count }} {{ article.dislikes.count }}</div>
	        	<div class="list-title">{{ article.title }}</div>
	        	<div class="list-authors">{{ article.authors }}</div>
	        	<div class="abstract"><p>{{ article.abstract }}</p></div>
	        </dd>
	        </dl>	
	   	</td>
	  	</tr>
    {% endfor %}
  	</table>
{% else %}
    <p>No articles are available.</p>
{% endif %}

{% endblock content %}
